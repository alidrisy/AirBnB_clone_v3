from flask import Flask, Response, render_template
from pytube import YouTube, Stream

app = Flask(__name__)

@app.route('/')
def home():
    return render_template('index.html')

@app.route('/play/<url>')
def play(url):
    try:
        yt = YouTube(url)
        stream = yt.streams.filter(only_audio=True).first()
        response = Response(stream.download(output_path="-"), content_type='audio/mp4')
        response.headers['Content-Disposition'] = 'inline; filename=' + yt.title + '.mp4'
        return response
    except Exception as e:
        return str(e)

if __name__ == '__main__':
    app.run(debug=True)
